{%- assign dateOfPost = {{post.date | date: "%d"}} -%}

{%- if dateOfPost == "01" or dateOfPost == "21" or dateOfPost == "31" -%}
	{%- assign ordinalEnding = "st" -%}
{%- elsif dateOfPost == "02" or dateOfPost == "22" -%}
	{%- assign ordinalEnding = "nd" -%}
{%- elsif dateOfPost == "03" or dateOfPost == "23" -%}
	{%- assign ordinalEnding = "rd" -%}
{%- else %}
	{%- assign ordinalEnding = "th" -%}
{%- endif %}


{%- assign firstDigitDofP = dateOfPost | slice: 0 -%}

{%- if firstDigitDofP == "0" -%}
	{%- assign prettyDateOfPost = dateOfPost | slice: 1 -%}
{%- else -%}
	{%- assign prettyDateOfPost = dateOfPost -%}
{%- endif -%}


{%- if post.category == "now" and postCounter != "pastFirstNow" and page.url != "/now" -%}

<p><a href="/now" title="{{ post.title }}" class="blog-listing-link">{{ post.title }}</a><br>
<time datetime="{{ post.date | date: '%Y-%m-%d' }}">{{ post.date | date: "%B" }} {{prettyDateOfPost}}{{ ordinalEnding }}, {{ post.date | date: "%Y" }}</time></p>

{%- assign postCounter = "pastFirstNow" -%}

{%- elsif post.category == "stream" -%}

<p><a href="{% unless post == site.categories.stream[0] %}/stream#{{post.url | remove_first: "/stream/"}}{% else %}/stream{% endunless %}" title="{{ post.title }}" class="blog-listing-link">{{ post.title }}</a><br>
<time datetime="{{ post.date | date: '%Y-%m-%d' }}">{{ post.date | date: "%B" }} {{prettyDateOfPost}}{{ ordinalEnding }}, {{ post.date | date: "%Y" }}</time></p>


{%- else -%}

<p><a href="{{ post.url }}" title="{{ post.title }}" class="blog-listing-link">{{ post.title }}</a><br>
<time datetime="{{ post.date | date: '%Y-%m-%d' }}">{{ post.date | date: "%B" }} {{prettyDateOfPost}}{{ ordinalEnding }}, {{ post.date | date: "%Y" }}</time></p>

{%- endif -%}


